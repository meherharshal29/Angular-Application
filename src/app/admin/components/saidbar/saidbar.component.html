<mat-sidenav-container class="sidenav-container" autosize>
  <!-- Sidebar -->
  <mat-sidenav #sidenav class="sidenav bg-white shadow-sm" [mode]="isMobile ? 'over' : 'side'" [opened]="!isMobile">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center p-2">
      <h3 class="w-100 m-0 fw-bold text-center" routerLink="/modules/admin/mainpanel/dashboard">
        Admin Panel
      </h3>
      <button class="btn btn-sm btn-outline-secondary d-md-none" (click)="sidenav.close()">
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <mat-accordion multi class="mt-3">
      <!-- Dashboard -->
      <button mat-button class="w-100 mb-2" routerLink="/modules/admin/mainpanel/dashboard" (click)="closeMobileMenu()">
        <mat-icon>dashboard</mat-icon> Dashboard
      </button>

      <button mat-button class="w-100 mb-2" routerLink="/" (click)="closeMobileMenu()">
        <mat-icon>home</mat-icon> User Home
      </button>

      <!-- Manage Items -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Manage Items</mat-panel-title>
        </mat-expansion-panel-header>
        <button mat-button class="w-100" routerLink="/modules/admin/vegetable/add" (click)="closeMobileMenu()">Add
          Item</button>
        <button mat-button class="w-100" routerLink="/modules/admin/vegetable/view-item"
          (click)="closeMobileMenu()">View Items</button>
      </mat-expansion-panel>

      <!-- Manage Categories -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Manage Categories</mat-panel-title>
        </mat-expansion-panel-header>
        <button mat-button class="w-100" routerLink="/modules/admin/category/add" (click)="closeMobileMenu()">Add
          Category</button>
        <button mat-button class="w-100" routerLink="/modules/admin/category/view" (click)="closeMobileMenu()">View
          Categories</button>
      </mat-expansion-panel>

      <!-- Manage Users -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Manage Users</mat-panel-title>
        </mat-expansion-panel-header>
        <button mat-button class="w-100" routerLink="/modules/admin/users/add" (click)="closeMobileMenu()">Add
          User</button>
        <button mat-button class="w-100" routerLink="/modules/admin/users/view" (click)="closeMobileMenu()">View
          Users</button>
      </mat-expansion-panel>

      <!-- Orders & Reports -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Orders & Reports</mat-panel-title>
        </mat-expansion-panel-header>
        <button mat-button class="w-100" routerLink="/modules/admin/orders/view" (click)="closeMobileMenu()">View
          Orders</button>
        <button mat-button class="w-100" routerLink="/modules/admin/reports"
          (click)="closeMobileMenu()">Reports</button>
      </mat-expansion-panel>

      <!-- Settings -->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Settings</mat-panel-title>
        </mat-expansion-panel-header>
        <button mat-button class="w-100" routerLink="/modules/admin/settings/profile"
          (click)="closeMobileMenu()">Profile</button>
        <button mat-button class="w-100" routerLink="/modules/admin/settings/change-password"
          (click)="closeMobileMenu()">Change Password</button>
      </mat-expansion-panel>

      <!-- Logout -->
      <div class="w-100 d-flex justify-content-center mt-4" *ngIf="isLoggedIn">
        <button 
          mat-flat-button 
          color="warn" 
          class="w-52" 
          (click)="logout()"
        >
          <mat-icon class="me-2">logout</mat-icon>
          Logout
        </button>
      </div>
    </mat-accordion>
  </mat-sidenav>

  <!-- Main content -->
  <mat-sidenav-content class="p-3 bg-light">
    <nav class="navbar navbar-light bg-white shadow-sm mb-3 d-md-none">
      <button class="btn btn-outline-primary" (click)="sidenav.toggle()">
        <mat-icon>menu</mat-icon>
      </button>
      <span class="navbar-brand mb-0 h1">Admin Panel</span>
    </nav>

    <router-outlet></router-outlet>
  </mat-sidenav-content>
</mat-sidenav-container>

<div *ngIf="showSpinner" class="spinner-overlay">
  <mat-spinner diameter="80" strokeWidth="5" class="custom-spinner"></mat-spinner>
</div>
